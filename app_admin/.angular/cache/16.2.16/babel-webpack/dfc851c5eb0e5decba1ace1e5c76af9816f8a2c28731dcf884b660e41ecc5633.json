{"ast":null,"code":"import { catchError } from 'rxjs/operators';\nimport { throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class TripDataService {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    this.apiBaseUrl = 'http://localhost:3000/api';\n    this.tripUrl = `${this.apiBaseUrl}/trips`;\n  }\n  addTrip(formData) {\n    console.log('Inside TripDataService#addTrip');\n    return this.httpClient.post(this.tripUrl, formData); // Return Observable directly\n  }\n\n  getTrip(tripCode) {\n    console.log('Inside TripDataService#getTrip');\n    return this.httpClient.get(`${this.tripUrl}/${tripCode}`).pipe(catchError(this.handleError));\n  }\n  getTrips() {\n    console.log('Inside TripDataService#getTrips');\n    return this.httpClient.get(`${this.tripUrl}`).pipe(catchError(this.handleError));\n  }\n  updateTrip(formData) {\n    console.log('Inside TripDataService#updateTrip');\n    console.log(formData);\n    // Ensure the trip code is correctly appended to the URL\n    const url = `${this.tripUrl}/${formData.code}`;\n    return this.httpClient.put(url, formData) // Ensure it's a typed PUT request for better handling\n    .pipe(catchError(this.handleError));\n  }\n  deleteTrip(tripCode) {\n    if (!tripCode) {\n      return throwError(() => new Error('Invalid trip code for deletion'));\n    }\n    console.log(`Inside TripDataService#deleteTrip for tripCode: ${tripCode}`);\n    return this.httpClient.delete(`${this.tripUrl}/${tripCode}`).pipe(catchError(this.handleError));\n  }\n  handleError(error) {\n    console.error('Something has gone wrong', error);\n    return throwError(() => new Error(error.message || 'Server error'));\n  }\n  static {\n    this.ɵfac = function TripDataService_Factory(t) {\n      return new (t || TripDataService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: TripDataService,\n      factory: TripDataService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["catchError","throwError","TripDataService","constructor","httpClient","apiBaseUrl","tripUrl","addTrip","formData","console","log","post","getTrip","tripCode","get","pipe","handleError","getTrips","updateTrip","url","code","put","deleteTrip","Error","delete","error","message","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Kenyk\\Desktop\\SNHUCompSci\\CS-465-Portfolio\\CS-465-Portfolio\\app_admin\\src\\app\\services\\trip-data.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { AuthResponse } from '../models/authresponse';\r\nimport { Trip } from '../models/trip';\r\nimport { User } from '../models/user';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TripDataService {\r\n\r\n  constructor(private httpClient: HttpClient) {}\r\n\r\n  private apiBaseUrl = 'http://localhost:3000/api';\r\n  private tripUrl = `${this.apiBaseUrl}/trips`;\r\n\r\n  public addTrip(formData: Trip): Observable<Trip> {\r\n    console.log('Inside TripDataService#addTrip');\r\n    return this.httpClient.post<Trip>(this.tripUrl, formData); // Return Observable directly\r\n  }\r\n\r\n  public getTrip(tripCode: string): Observable<Trip> {\r\n    console.log('Inside TripDataService#getTrip');\r\n    return this.httpClient\r\n      .get<Trip>(`${this.tripUrl}/${tripCode}`)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }  \r\n\r\n  public getTrips(): Observable<Trip[]> {\r\n    console.log('Inside TripDataService#getTrips');\r\n    return this.httpClient\r\n    .get<Trip[]>(`${this.tripUrl}`)\r\n    .pipe(catchError(this.handleError));\r\n  }\r\n\r\n  public updateTrip(formData: Trip): Observable<Trip> {\r\n    console.log('Inside TripDataService#updateTrip');\r\n    console.log(formData);\r\n\r\n    // Ensure the trip code is correctly appended to the URL\r\n    const url = `${this.tripUrl}/${formData.code}`;\r\n    \r\n    return this.httpClient\r\n      .put<Trip>(url, formData) // Ensure it's a typed PUT request for better handling\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n}\r\n\r\n\r\n  public deleteTrip(tripCode: string): Observable<any> {\r\n    if (!tripCode) {\r\n      return throwError(() => new Error('Invalid trip code for deletion'));\r\n    }\r\n    console.log(`Inside TripDataService#deleteTrip for tripCode: ${tripCode}`);\r\n    return this.httpClient\r\n    .delete(`${this.tripUrl}/${tripCode}`)\r\n    .pipe(\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n  \r\n  private handleError(error: any): Observable<never> {\r\n    console.error('Something has gone wrong', error); \r\n    return throwError(() => new Error(error.message || 'Server error'));\r\n  }\r\n}"],"mappings":"AAEA,SAASA,UAAU,QAAQ,gBAAgB;AAC3C,SAAqBC,UAAU,QAAQ,MAAM;;;AAQ7C,OAAM,MAAOC,eAAe;EAE1BC,YAAoBC,UAAsB;IAAtB,KAAAA,UAAU,GAAVA,UAAU;IAEtB,KAAAC,UAAU,GAAG,2BAA2B;IACxC,KAAAC,OAAO,GAAG,GAAG,IAAI,CAACD,UAAU,QAAQ;EAHC;EAKtCE,OAAOA,CAACC,QAAc;IAC3BC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7C,OAAO,IAAI,CAACN,UAAU,CAACO,IAAI,CAAO,IAAI,CAACL,OAAO,EAAEE,QAAQ,CAAC,CAAC,CAAC;EAC7D;;EAEOI,OAAOA,CAACC,QAAgB;IAC7BJ,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7C,OAAO,IAAI,CAACN,UAAU,CACnBU,GAAG,CAAO,GAAG,IAAI,CAACR,OAAO,IAAIO,QAAQ,EAAE,CAAC,CACxCE,IAAI,CACHf,UAAU,CAAC,IAAI,CAACgB,WAAW,CAAC,CAC7B;EACL;EAEOC,QAAQA,CAAA;IACbR,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAC9C,OAAO,IAAI,CAACN,UAAU,CACrBU,GAAG,CAAS,GAAG,IAAI,CAACR,OAAO,EAAE,CAAC,CAC9BS,IAAI,CAACf,UAAU,CAAC,IAAI,CAACgB,WAAW,CAAC,CAAC;EACrC;EAEOE,UAAUA,CAACV,QAAc;IAC9BC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;IAChDD,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IAErB;IACA,MAAMW,GAAG,GAAG,GAAG,IAAI,CAACb,OAAO,IAAIE,QAAQ,CAACY,IAAI,EAAE;IAE9C,OAAO,IAAI,CAAChB,UAAU,CACnBiB,GAAG,CAAOF,GAAG,EAAEX,QAAQ,CAAC,CAAC;IAAA,CACzBO,IAAI,CACHf,UAAU,CAAC,IAAI,CAACgB,WAAW,CAAC,CAC7B;EACP;EAGSM,UAAUA,CAACT,QAAgB;IAChC,IAAI,CAACA,QAAQ,EAAE;MACb,OAAOZ,UAAU,CAAC,MAAM,IAAIsB,KAAK,CAAC,gCAAgC,CAAC,CAAC;;IAEtEd,OAAO,CAACC,GAAG,CAAC,mDAAmDG,QAAQ,EAAE,CAAC;IAC1E,OAAO,IAAI,CAACT,UAAU,CACrBoB,MAAM,CAAC,GAAG,IAAI,CAAClB,OAAO,IAAIO,QAAQ,EAAE,CAAC,CACrCE,IAAI,CACHf,UAAU,CAAC,IAAI,CAACgB,WAAW,CAAC,CAC7B;EACH;EAEQA,WAAWA,CAACS,KAAU;IAC5BhB,OAAO,CAACgB,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChD,OAAOxB,UAAU,CAAC,MAAM,IAAIsB,KAAK,CAACE,KAAK,CAACC,OAAO,IAAI,cAAc,CAAC,CAAC;EACrE;;;uBA1DWxB,eAAe,EAAAyB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAf5B,eAAe;MAAA6B,OAAA,EAAf7B,eAAe,CAAA8B,IAAA;MAAAC,UAAA,EAFd;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}